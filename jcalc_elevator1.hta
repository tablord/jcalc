<HTML sizset="0" sizcache="1" xmlns="http://www.w3.org/1999/xhtml" APPLICATIONNAME="D:\Documents\programmation\jcalc\jcalcV0\jcalc_elevator1.hta" xmlns:svg = "http://www.w3.org/2000/svg" XMLNS:HTA><HEAD><HTA:APPLICATION APPLICATIONNAME="JCalc vide" SINGLEINSTANCE="yes" SCROLL="yes"></HTA:APPLICATION><LINK rel=stylesheet type=text/css href="jcalc.css" src="jcalc.css">
<SCRIPT src="jquery-1.5.1.min.js"></SCRIPT>

<SCRIPT class=UPDATE src="jcalcEdi.js"></SCRIPT>

<SCRIPT src="units.js"></SCRIPT>

<SCRIPT src="jcalc.js"></SCRIPT>

<SCRIPT src="axe.js"></SCRIPT>

<SCRIPT src="stateMachine.js"></SCRIPT>

<SCRIPT src="BOM.js"></SCRIPT>

<SCRIPT src="sys.js"></SCRIPT>

<SCRIPT src="ocrRdy.js"></SCRIPT>

<SCRIPT src="finance.js"></SCRIPT>
</HEAD>
<BODY sizset="0" sizcache="1" designMode="on" hideTrace="true">
<DIV id=menu class=TOOLBAR style="OVERFLOW: hidden; HEIGHT: 45px; WIDTH: 1383px; ZOOM: 1; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; FILTER:  alpha(opacity=100); MARGIN: 0px; PADDING-RIGHT: 0px" >
<DIV><SPAN id=codeId>code0004</SPAN><INPUT onclick=jc.hideCode(event) type=checkbox>hide codes</INPUT><INPUT onclick=jc.hideCut(event) type=checkbox>hide Cut</INPUT><INPUT onclick=jc.hideTest(event) type=checkbox>hide tests</INPUT><INPUT onclick=jc.hideTrace(event) type=checkbox>hide traces</INPUT><INPUT onclick=jc.autoRun(event) CHECKED type=checkbox>auto run</INPUT><BUTTON onclick=jc.selectElement(undefined);>hide ToolBars</BUTTON><BUTTON onclick=jc.print();>print...</BUTTON></DIV>
<DIV><SPAN><BUTTON onclick=jc.execUntilSelected(); id=runUntilSelectedBtn style="COLOR: #8dff60">&#9658;|</BUTTON><BUTTON onclick=jc.execAll(); id=runAllBtn class=WARNING style="COLOR: #8dff60" >&#9658;&#9658;</BUTTON><BUTTON onclick=jc.clearTimers(); id=stopAnimation style="COLOR: red" >&#9632;</BUTTON><BUTTON onclick=jc.showOutputHtml(this);>show html</BUTTON><BUTTON onclick=jc.copyOutputToTest(this);>&#8594;test</BUTTON><BUTTON onclick=jc.save(); id=saveBtn class=WARNING >save</BUTTON><BUTTON onclick=jc.cutBlock(jc.selectedElement);>&#8595; cut &#8595;</BUTTON></SPAN><SPAN id=objectToolBar></SPAN></DIV></DIV>
<DIV id=jcContent style="OVERFLOW: scroll; BORDER-TOP: medium none; HEIGHT: 633px; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; BORDER-LEFT: medium none" sizset="0" sizcache="1">
<DIV id=sect0002 class=SECTION sizset="0" sizcache="1">
<H1 class=SECTIONTITLE contentEditable=false>1 Simulation of a small automatism</H1>
<DIV class=SECTIONCONTAINER sizset="0" sizcache="1">
<DIV id=rich0003 class=RICHTEXT contentEditable=false>This is the simulation of a small automatism: an elevator that moves up and down at constant speed</DIV><PRE id=code0006 class=CODE contentEditable=false><P>axe('elevator',{p:0,v:0,a:1,t:0});</P><P>jc.vars.ELEVATORLOW = 0;</P><P>jc.vars.ELEVATORHIGH = 3;</P><P>jc.vars.MARGIN = 0.001;</P></PRE>
<DIV id=out0006 class=OUTPUT>0.001</DIV><PRE id=code0004 class=CODE contentEditable=false><P>stateMachine('elevatorSm')</P><P>.state('moveDown').initial()</P><P>  .entry("elevator.move({p:ELEVATORLOW})")</P><P>  .transition('waitDown',"elevator.at().p &lt;= ELEVATORLOW+MARGIN")</P><P>.state('waitDown')</P><P>  .transition('moveUp',"wait(5)")</P><P>.state('moveUp')</P><P>  .entry("elevator.move({p:ELEVATORHIGH})")</P><P>  .transition('waitUp',"elevator.at().p &gt;= ELEVATORHIGH-MARGIN")</P><P>.state('waitUp')</P><P>  .transition('moveDown',"wait(3)")</P><P>.end()</P></PRE>
<DIV id=out0004 class=OUTPUT>
<DIV class=STATEMACHINE>elevatorSm
<DIV class="SMSTATE SMCURRENTSTATE">moveDown<BR>entry: <SPAN class=CODEVIEW>elevator.move({p:ELEVATORLOW})</SPAN>
<DIV class=SMTRANSITION>elevator.at().p &lt;= ELEVATORLOW+MARGIN --&gt;waitDown</DIV></DIV>
<DIV class=SMSTATE>waitDown<BR>
<DIV class=SMTRANSITION>wait(5) --&gt;moveUp</DIV></DIV>
<DIV class=SMSTATE>moveUp<BR>entry: <SPAN class=CODEVIEW>elevator.move({p:ELEVATORHIGH})</SPAN>
<DIV class=SMTRANSITION>elevator.at().p &gt;= ELEVATORHIGH-MARGIN --&gt;waitUp</DIV></DIV>
<DIV class=SMSTATE>waitUp<BR>
<DIV class=SMTRANSITION>wait(3) --&gt;moveDown</DIV></DIV></DIV></DIV><PRE id=code0008 class=CODE contentEditable=false><P>trace.on=false;</P><P>jc.animate(100)</P><P>jc.simulation.runSteps();</P><P>$('#elevator').css('top',300-elevator.at().p*100);</P><P>elevatorSm;</P></PRE>
<DIV id=out0008 class=OUTPUT>waitDown at time=0.1 in runOnce/transition--&gt;moveUp: La valeur de la propriété « wait » est null ou non définie, pas un objet Function<BR>file:///D:/Documents/programmation/jcalc/jcalcV0/stateMachine.js line:114<BR></DIV><PRE id=code0010 class=CODE contentEditable=false><P>output.html('&lt;DIV id=house style="height:360px; width=100%;&nbsp;border:solid blue 5px"&gt;&lt;DIV id=elevator&nbsp;style="position:relative; top:300; height:50px; width:150px; border:solid red 5px;"&gt;&lt;/DIV&gt;&lt;/DIV&gt;')</P></PRE>
<DIV id=out0010 class=OUTPUT>
<DIV id=house style="BORDER-TOP: blue 5px solid; HEIGHT: 360px; BORDER-RIGHT: blue 5px solid; WIDTH: 100%; BORDER-BOTTOM: blue 5px solid; BORDER-LEFT: blue 5px solid">
<DIV id=elevator style="BORDER-TOP: red 5px solid; HEIGHT: 50px; BORDER-RIGHT: red 5px solid; WIDTH: 150px; BORDER-BOTTOM: red 5px solid; POSITION: relative; BORDER-LEFT: red 5px solid; TOP: 300px"></DIV></DIV>undefined</DIV><PRE id=code0012 class=CODE contentEditable=false>jc.inspect(trace)</PRE>
<DIV id=out0012 class=OUTPUT>
<DIV class=INSPECT>
<FIELDSET><LEGEND>function trace(/*objects*/) </LEGEND>
<TABLE class=INSPECT>
<TBODY>
<TR>
<TH vAlign=top>on</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>false</TD></TR>
<TR>
<TH vAlign=top>span</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function ()</B><BR></TD></TR></TBODY></TABLE></FIELDSET></DIV></DIV></DIV></DIV></DIV></BODY></HTML>