<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <HTA:APPLICATION
    APPLICATIONNAME="Operating System Version par exemple"
    SCROLL="yes"
    SINGLEINSTANCE="yes">
  <link rel="stylesheet" href="jcalc.css" type="text/css" src="jcalc.css"/>
</head>

<script src="jcalcEdi.js"></script>
<script src="jquery.js"></script>
<script src="jcalc.js"></script>
<script src="axe.js"></script>
<script src="stateMachine.js"></script>
<script src="BOM.js"></script>

<body designMode="on">
  <div id="localToolBar" class="HIDDEN">
    <span id=codeId>codeid</span>
    <button>new</button>
    <button onclick="jc.hideCode(this);">hide code</button>
    <button onclick="jc.showOutputHtml(this);">show output html</button>
    <button onclick="jc.toggleAutoExec();">autoexec</button>
    <button onclick="jc.execAutoExec();">run</button>
    <button onclick="jc.execAll();">run all</button>
  </div>
  <h1>basics</h1>
  <div id="code_basics01" class="CODE" onclick="jc.codeClick(this);" contentEditable>3+5</div>
  <div id="out_basics01" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test_basics01" class="TEST">8</div>
  <h1>ECMA5 and jcExt</h1>
  <pre id="code_ext01" class="CODE" onclick="jc.codeClick(this);" contentEditable>
output.inspect(a={one:1,two:2,three:3},b=jc.copy(a),b.one='un',a,b)
  </pre>
  <div id="out_ext01" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test_ext01" class="TEST">
<DIV class=TEXT><DIV> <H3>[object Object]</H3> <TABLE> <TBODY> <TR> <TH vAlign=top>one</TH> <TD style="TEXT-ALIGN: left" vAlign=top>1</TD></TR> <TR> <TH vAlign=top>two</TH> <TD style="TEXT-ALIGN: left" vAlign=top>2</TD></TR> <TR> <TH vAlign=top>three</TH> <TD style="TEXT-ALIGN: left" vAlign=top>3</TD></TR></TBODY></TABLE></DIV> <DIV> <H3>[object Object]</H3> <TABLE> <TBODY> <TR> <TH vAlign=top>one</TH> <TD style="TEXT-ALIGN: left" vAlign=top>un</TD></TR> <TR> <TH vAlign=top>two</TH> <TD style="TEXT-ALIGN: left" vAlign=top>2</TD></TR> <TR> <TH vAlign=top>three</TH> <TD style="TEXT-ALIGN: left" vAlign=top>3</TD></TR></TBODY></TABLE></DIV> <DIV> <H3>un</H3> <TABLE> <TBODY></TBODY></TABLE></DIV> <DIV> <H3>[object Object]</H3> <TABLE> <TBODY> <TR> <TH vAlign=top>one</TH> <TD style="TEXT-ALIGN: left" vAlign=top>1</TD></TR> <TR> <TH vAlign=top>two</TH> <TD style="TEXT-ALIGN: left" vAlign=top>2</TD></TR> <TR> <TH vAlign=top>three</TH> <TD style="TEXT-ALIGN: left" vAlign=top>3</TD></TR></TBODY></TABLE></DIV> <DIV> <H3>[object Object]</H3> <TABLE> <TBODY> <TR> <TH vAlign=top>one</TH> <TD style="TEXT-ALIGN: left" vAlign=top>un</TD></TR> <TR> <TH vAlign=top>two</TH> <TD style="TEXT-ALIGN: left" vAlign=top>2</TD></TR> <TR> <TH vAlign=top>three</TH> <TD style="TEXT-ALIGN: left" vAlign=top>3</TD></TR></TBODY></TABLE></DIV></DIV>  </div>
  <h1>jCalc lib</h1>
  <pre id="code0102" class="CODE" onclick="jc.codeClick(this);" contentEditable>
v("hauteurTotale$mm",f("hauteur$mm+5"));
v("hauteur$mm",3);
hauteurTotale$mm
  </pre>
  <div id="out0102" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test0102" class="TEST"><VAR>hauteurTotale</VAR>= <SPAN class=VALUE>8</SPAN><SPAN class=UNIT>mm</SPAN></div>
  <pre id="code0103" class="CODE" onclick="jc.codeClick(this);" contentEditable>v("hauteur$mm",3)</pre>
  <div id="out0103" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <pre id="code0104" class="CODE AUTOEXEC" onclick="jc.codeClick(this);" contentEditable>v("hauteur$mm")</pre>
  <div id="out0104" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <pre id="code0105" class="CODE" onclick="jc.codeClick(this);" contentEditable>
table("myTable")
.add({_id:"apple" ,quantity:250,price:0.5,amount:f("quantity*price")})
.add({_id:"orange",quantity:100,price:0.7,amount:f("quantity*price")});
  </pre>
  <div id="out0105" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <pre id="code0106" class="CODE" onclick="jc.codeClick(this);" contentEditable>
output
.p("first § where we show that ",hauteurTotale$mm)
.p("second § where we show myTable",myTable.span({cols:{_id:1,amount:1}}))
.ul()
  .li('list 1 the full table sorted by quantity from min to max',myTable.sort({quantity:1}))
  .li('list 2 a row',myTable.orange)
  .li('list 3 a row as a list',myTable.orange.list())
.end()
.h('Titre 1').indent()
  .h('Sous-Titre 1')
  .h('Sous-Titre 2')
.indent(-1)
.h('Titre 2')
  </pre>
  <div id="out0106" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <h1>JQuery</h1>
  <pre id="code0201" class="CODE" onclick="jc.codeClick(this);" contentEditable>$('#code0104')[0]</pre>
  <div id="out0201" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test0201" class="TEST">DOM Element<SPAN class=INSPECTHTML>&lt;PRE onclick=jc.codeClick(this); id=code0104 class="CODE AUTOEXEC" contentEditable=true&gt;v("hauteur$mm")&lt;/PRE&gt;</SPAN>
</div>
  <h1>Axe</h1>
  <pre id="code0301" class="CODE" onclick="jc.codeClick(this);" contentEditable>
axe('lift')
.accelerate({t:5,a:1})
.accelerate({t:10,a:-1})
.accelerate({t:15,a:0})
.move({t:20,a:1,d:40,v1:5})
  </pre>
  <div id="out0301" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <pre id="code0302" class="CODE" onclick="jc.codeClick(this);" contentEditable>
lift
.accelerate({t:33,a:0})
  </pre>
  <div id="out0302" class="OUTPUT" onclick="jc.outClick(this)">no output</div>

  <h1>StateMachine</h1>
  <pre id="code0401" class="CODE" onclick="jc.codeClick(this);" contentEditable>
v('count',-1);
stateMachine('myStateMachine')
.state('state1').initial()
  .run('v("count",count+1)')
  .transition('state2','count == 10')
.state('state2')
  .run('v("count",count-1)')
  .transition('state1','count == 0')
.end().view();
  </pre>
  <div id="out0401" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <pre id="code0402" class="CODE" onclick="jc.codeClick(this);" contentEditable>
output
.p(jc.simulation.runWhile("jc.simulation.time$s < 10"))
.p(myStateMachine.view({log:true}))
.p(count)
  </pre>
  <div id="out0402" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <h1>RichText</h1>
  <div id="rich0000" class="RICHTEXT" onclick="jc.richTextClick(this)">
    <h1>titre</h1>
    <p>nomal §<span id="code1111" class="CODE AUTOEXEC" style="display:none;">myTable</span><span id="out1111" class="OUTPUT" contentEditable=false>---</span> textNormal</p>
    <div id="code1112" class="CODE AUTOEXEC" style="display:none;">myStateMachine</div>
    <div id="out1112" class="OUTPUT">--</div>
  </div>
  <h1>BOM</h1>
  <pre id="code_Permutation" class="CODE" onclick="jc.codeClick(this);" contentEditable>
p = permutations(['A','B','C']);
table().addRows(p);
  </pre>
  <div id="out_Permutation" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test_Permutation" class="TEST">
    <TABLE border=1> <THEAD> <TR> <TH>0</TH> <TH>1</TH> <TH>2</TH></TR></THEAD> <TBODY> <TR> <TD>A</TD> <TD>B</TD> <TD>C</TD></TR> <TR> <TD>A</TD> <TD>C</TD> <TD>B</TD></TR> <TR> <TD>B</TD> <TD>A</TD> <TD>C</TD></TR> <TR> <TD>B</TD> <TD>C</TD> <TD>A</TD></TR> <TR> <TD>C</TD> <TD>A</TD> <TD>B</TD></TR> <TR> <TD>C</TD> <TD>B</TD> <TD>A</TD></TR></TBODY></TABLE>
  </div>
  <pre id="code_Bom_PlanOfNeed" class="CODE" onclick="jc.codeClick(this);" contentEditable>
var p1,p2,p3,p4,p5; 
output
.p(p1 = (new PlanOfNeed()).add(0,20).add(3,10).add(0,30))
.p(p2 = p1.copy().add(3,100))
.p(p3 = (new PlanOfNeed()).add(1,15).add(2,45).add(5,60))
.p(p4 = p1.max(p3))
.p(p5 = p2.sum(p4))
  </pre>
  <div id="out_Bom_PlanOfNeed" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test_Bom_PlanOfNeed" class="TEST">
<DIV class=TEXT><P> <DIV><VAR>plan of need</VAR> <TABLE border=1> <THEAD> <TR> <TH>time</TH> <TH>quantity</TH> <TH>cumul</TH></TR></THEAD> <TBODY> <TR> <TD>0</TD> <TD>50</TD> <TD>50</TD></TR> <TR> <TD>3</TD> <TD>10</TD> <TD>60</TD></TR></TBODY></TABLE></DIV> <P></P> <P> <DIV><VAR>plan of need</VAR> <TABLE border=1> <THEAD> <TR> <TH>time</TH> <TH>quantity</TH> <TH>cumul</TH></TR></THEAD> <TBODY> <TR> <TD>0</TD> <TD>50</TD> <TD>50</TD></TR> <TR> <TD>3</TD> <TD>110</TD> <TD>160</TD></TR></TBODY></TABLE></DIV> <P></P> <P> <DIV><VAR>plan of need</VAR> <TABLE border=1> <THEAD> <TR> <TH>time</TH> <TH>quantity</TH> <TH>cumul</TH></TR></THEAD> <TBODY> <TR> <TD>1</TD> <TD>15</TD> <TD>15</TD></TR> <TR> <TD>2</TD> <TD>45</TD> <TD>60</TD></TR> <TR> <TD>5</TD> <TD>60</TD> <TD>120</TD></TR></TBODY></TABLE></DIV> <P></P> <P> <DIV><VAR>plan of need</VAR> <TABLE border=1> <THEAD> <TR> <TH>time</TH> <TH>quantity</TH> <TH>cumul</TH></TR></THEAD> <TBODY> <TR> <TD>0</TD> <TD>50</TD> <TD>50</TD></TR> <TR> <TD>2</TD> <TD>10</TD> <TD>60</TD></TR> <TR> <TD>5</TD> <TD>60</TD> <TD>120</TD></TR></TBODY></TABLE></DIV> <P></P> <P> <DIV><VAR>plan of need</VAR> <TABLE border=1> <THEAD> <TR> <TH>time</TH> <TH>quantity</TH> <TH>cumul</TH></TR></THEAD> <TBODY> <TR> <TD>0</TD> <TD>100</TD> <TD>100</TD></TR> <TR> <TD>2</TD> <TD>10</TD> <TD>110</TD></TR> <TR> <TD>3</TD> <TD>110</TD> <TD>220</TD></TR> <TR> <TD>5</TD> <TD>60</TD> <TD>280</TD></TR></TBODY></TABLE></DIV> <P></P></DIV>  </div>
  <pre id="code0502" class="CODE" onclick="jc.codeClick(this);" contentEditable>
product('product1',
  bom('main170',['width_170'],
    {part:'OS frame',quantity:1,neededAt:0},
    {part:'GS frame',quantity:1,neededAt:0},
    {part:'beam 170',quantity:6,neededAt:0}
  ),
  bom('main210',['width_210','setup_manual'],
    {part:'OS frame',quantity:1,neededAt:0},
    {part:'GS frame',quantity:1,neededAt:0},
    {part:'beam 210',quantity:6,neededAt:0}
  ),
  bom('main210',['width_210','setup_automatic'],
    {part:'OS frame',quantity:1,neededAt:0},
    {part:'GS frame',quantity:1,neededAt:0},
    {part:'beam 210',quantity:6,neededAt:0}
  )
).updateVariables()
.setConstraints({quantity:10,max:{'width_170':6,'width_210':7,'setup_manual':10,'setup_automatic':8}})
.updateParts()
.updateScenarii()
product1.parts['OS frame'].code().compile().computeNeeds()
  </pre>
  <div id="out0502" class="OUTPUT" onclick="jc.outClick(this)">no output</div>

  <h1>Non regression tests</h1>
  <pre id="code_NRT0001" class="CODE" onclick="jc.codeClick(this);" contentEditable>
     // creating a function "test" or a "out" will destroy a local variable and corrupt the environement
function test() {};
var out = 'toto';
'ok'
  </pre>
  <div id="out_NRT0001" class="OUTPUT" onclick="jc.outClick(this)">no output</div>
  <div id="test_NRT0001" class="TEST">ok</div>


</body>
</html>