<div id="sect0002" class="SECTION ELEMENT" sizset="0" sizcache="1">
<h1 class="SECTIONTITLE EDITABLE" contenteditable="false">1 Simulation of a small automatism</h1>
<div sizset="0" sizcache="1" container="sectionContent" class="INDENT">
<div id="rich0003" class="RICHTEXT ELEMENT EDITABLE" contenteditable="false">This is the simulation of a small automatism: an elevator that moves up and down at constant speed</div><div class="ELEMENT CODE SHOW" func="axe('elevator',{p:0,a:1,t:0});
tb.vars.ELEVATORLOW = 0;
tb.vars.ELEVATORHIGH = 3;
tb.vars.MARGIN = 0.001;" contenteditable="false" id="code0006" itemscope="" itemtype="https://tablord.com/templates/code"><pre class="SOURCE"><span class="token function">axe</span><span class="token punctuation">(</span><span class="token string">'elevator'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>p<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tb<span class="token punctuation">.</span>vars<span class="token punctuation">.</span><span class="token constant">ELEVATORLOW</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
tb<span class="token punctuation">.</span>vars<span class="token punctuation">.</span><span class="token constant">ELEVATORHIGH</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
tb<span class="token punctuation">.</span>vars<span class="token punctuation">.</span><span class="token constant">MARGIN</span> <span class="token operator">=</span> <span class="token number">0.001</span><span class="token punctuation">;</span></pre><div class="OUTPUT SUCCESS">0.001</div></div>
<div class="ELEMENT CODE SHOW" func="tb.stateMachine('elevatorSm')
.state('moveDown').initial()
  .entry(&quot;elevator.move({p:ELEVATORLOW,v1:-elevatorScene.v1}); &quot;)
  .transition('waitDown',&quot;elevator.at().p <= ELEVATORLOW+MARGIN&quot;)
.state('waitDown')
  .run(&quot;elevatorScene.chbRez.checked(false)&quot;)
  .transition('moveUp',&quot;elevatorScene.chb1er&quot;)
.state('moveUp')
  .entry(&quot;elevator.move({p:ELEVATORHIGH,v1:elevatorScene.v1});&quot;)
  .transition('waitUp',&quot;elevator.at().p >= ELEVATORHIGH-MARGIN&quot;)
.state('waitUp')
  .run(&quot;elevatorScene.chb1er.checked(false)&quot;)
  .transition('moveDown',&quot;wait(5)&quot;)
  .transition('moveDown',&quot;elevatorScene.chbRez&quot;)
.end()" contenteditable="false" id="code0004" itemscope="" itemtype="https://tablord.com/templates/code"><pre class="SOURCE">tb<span class="token punctuation">.</span><span class="token function">stateMachine</span><span class="token punctuation">(</span><span class="token string">'elevatorSm'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'moveDown'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">initial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">"elevator.move({p:ELEVATORLOW,v1:-elevatorScene.v1}); "</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'waitDown'</span><span class="token punctuation">,</span><span class="token string">"elevator.at().p &lt;= ELEVATORLOW+MARGIN"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'waitDown'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"elevatorScene.chbRez.checked(false)"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'moveUp'</span><span class="token punctuation">,</span><span class="token string">"elevatorScene.chb1er"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'moveUp'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">"elevator.move({p:ELEVATORHIGH,v1:elevatorScene.v1});"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'waitUp'</span><span class="token punctuation">,</span><span class="token string">"elevator.at().p &gt;= ELEVATORHIGH-MARGIN"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'waitUp'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"elevatorScene.chb1er.checked(false)"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'moveDown'</span><span class="token punctuation">,</span><span class="token string">"wait(5)"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'moveDown'</span><span class="token punctuation">,</span><span class="token string">"elevatorScene.chbRez"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre><div class="OUTPUT SUCCESS"><div class="STATEMACHINE">elevatorSm<div class="SMSTATE SMCURRENTSTATE">moveDown<br>entry: <span class="CODEVIEW">elevator.move({p:ELEVATORLOW,v1:-elevatorScene.v1}); </span><div class="SMTRANSITION">elevator.at().p &lt;= ELEVATORLOW+MARGIN --&gt;waitDown</div></div><div class="SMSTATE">waitDown<br>run  : <span class="CODEVIEW">elevatorScene.chbRez.checked(false)</span><div class="SMTRANSITION">elevatorScene.chb1er --&gt;moveUp</div></div><div class="SMSTATE">moveUp<br>entry: <span class="CODEVIEW">elevator.move({p:ELEVATORHIGH,v1:elevatorScene.v1});</span><div class="SMTRANSITION">elevator.at().p &gt;= ELEVATORHIGH-MARGIN --&gt;waitUp</div></div><div class="SMSTATE">waitUp<br>run  : <span class="CODEVIEW">elevatorScene.chb1er.checked(false)</span><div class="SMTRANSITION">wait(5) --&gt;moveDown</div><div class="SMTRANSITION">elevatorScene.chbRez --&gt;moveDown</div></div></div></div></div>
<div class="ELEMENT CODE SHOW" func="tb.scene('elevatorScene',{height:400})
  .checkBox('chb1er',{top:0,left:150}).checked(true)
  .checkBox('chbRez',{top:300,left:150})
  .div('cabin',{height:50,width:100,border:'solid red 5px'})
  .div('statusBar',{top:360,left:300,width:400})
  .value('v1',{top:360,width:250})
.end()" contenteditable="false" id="code0010" itemscope="" itemtype="https://tablord.com/templates/code"><pre class="SOURCE">tb<span class="token punctuation">.</span><span class="token function">scene</span><span class="token punctuation">(</span><span class="token string">'elevatorScene'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>height<span class="token punctuation">:</span><span class="token number">400</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">checkBox</span><span class="token punctuation">(</span><span class="token string">'chb1er'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>top<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>left<span class="token punctuation">:</span><span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">checkBox</span><span class="token punctuation">(</span><span class="token string">'chbRez'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>top<span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">,</span>left<span class="token punctuation">:</span><span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span><span class="token string">'cabin'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>height<span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">,</span>width<span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">,</span>border<span class="token punctuation">:</span><span class="token string">'solid red 5px'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span><span class="token string">'statusBar'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>top<span class="token punctuation">:</span><span class="token number">360</span><span class="token punctuation">,</span>left<span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">,</span>width<span class="token punctuation">:</span><span class="token number">400</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>top<span class="token punctuation">:</span><span class="token number">360</span><span class="token punctuation">,</span>width<span class="token punctuation">:</span><span class="token number">250</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre><div class="OUTPUT SUCCESS"><div class="SCENE" style="height: 400px;"><div class="SCENECONTAINER"><span class="IELEMENT" style="top: 0px; left: 150px;"><input type="checkbox">chb1er</span><span class="IELEMENT" style="top: 300px; left: 150px;"><input type="checkbox">chbRez</span><div class="IELEMENT" style="height: 50px; width: 100px; border: 5px solid red; top: 0.5px;">2.99</div><div class="IELEMENT" style="top: 360px; left: 300px; width: 400px;">[Simulation "tb.simulation" time: 9.500]</div><span class="IELEMENT" style="top: 360px; width: 250px;">v1<input type="number" value="0"></span></div></div></div></div>
<div class="ELEMENT CODE SHOW INANIMATION" func="trace.off();
tb.animate(100);
elevatorScene.v1.value(1);
tb.simulation.runSteps();
elevatorScene.cabin.top(300-elevator.at().p*100).html(elevator.at().p.toFixed(2));
elevatorScene.statusBar.html(tb.simulation.toString());
output.p(elevatorSm,elevator);
if ((tb.simulation.time$s > 15) &amp;&amp; ('runonce' in tb.url.arguments)) tb.close();" contenteditable="false" id="code0008" itemscope="" itemtype="https://tablord.com/templates/code"><pre class="SOURCE">trace<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tb<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
elevatorScene<span class="token punctuation">.</span>v1<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tb<span class="token punctuation">.</span>simulation<span class="token punctuation">.</span><span class="token function">runSteps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
elevatorScene<span class="token punctuation">.</span>cabin<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token operator">-</span>elevator<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>p<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>elevator<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>p<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
elevatorScene<span class="token punctuation">.</span>statusBar<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>tb<span class="token punctuation">.</span>simulation<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
output<span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>elevatorSm<span class="token punctuation">,</span>elevator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tb<span class="token punctuation">.</span>simulation<span class="token punctuation">.</span>time$s <span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">'runonce'</span> <span class="token keyword">in</span> tb<span class="token punctuation">.</span>url<span class="token punctuation">.</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span> tb<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><div class="OUTPUT SUCCESS"><p></p><div class="STATEMACHINE">elevatorSm<div class="SMSTATE SMCURRENTSTATE">moveDown<br>entry: <span class="CODEVIEW">elevator.move({p:ELEVATORLOW,v1:-elevatorScene.v1}); </span><div class="SMTRANSITION">elevator.at().p &lt;= ELEVATORLOW+MARGIN --&gt;waitDown</div></div><div class="SMSTATE">waitDown<br>run  : <span class="CODEVIEW">elevatorScene.chbRez.checked(false)</span><div class="SMTRANSITION">elevatorScene.chb1er --&gt;moveUp</div></div><div class="SMSTATE">moveUp<br>entry: <span class="CODEVIEW">elevator.move({p:ELEVATORHIGH,v1:elevatorScene.v1});</span><div class="SMTRANSITION">elevator.at().p &gt;= ELEVATORHIGH-MARGIN --&gt;waitUp</div></div><div class="SMSTATE">waitUp<br>run  : <span class="CODEVIEW">elevatorScene.chb1er.checked(false)</span><div class="SMTRANSITION">wait(5) --&gt;moveDown</div><div class="SMTRANSITION">elevatorScene.chbRez --&gt;moveDown</div></div></div><table border="1px"><thead><tr><th>f</th><th>t</th><th>p</th><th>v</th><th>a</th><th>j</th><th>phase</th></tr></thead><tbody><tr><td>accelerate</td><td>-Infinity</td><td>0.000</td><td>0.000</td><td>0.000</td><td>--</td><td>init</td></tr><tr><td>accelerate</td><td>0.100</td><td>0.000</td><td>0.000</td><td>1.000</td><td>--</td><td>t1</td></tr><tr><td>accelerate</td><td>1.000</td><td>0.405</td><td>0.900</td><td>0.000</td><td>--</td><td>tc</td></tr><tr><td>accelerate</td><td>3.433</td><td>2.595</td><td>0.900</td><td>-1.000</td><td>--</td><td>t2</td></tr><tr><td>accelerate</td><td>4.333</td><td>3.000</td><td>-0.000</td><td>0.000</td><td>--</td><td>ts</td></tr><tr><td>accelerate</td><td>9.400</td><td>3.000</td><td>-0.000</td><td>-1.000</td><td>--</td><td>t1</td></tr><tr><td>accelerate</td><td>10.400</td><td>2.500</td><td>-1.000</td><td>0.000</td><td>--</td><td>tc</td></tr><tr><td>accelerate</td><td>12.400</td><td>0.500</td><td>-1.000</td><td>1.000</td><td>--</td><td>t2</td></tr><tr><td>accelerate</td><td>13.400</td><td>-0.000</td><td>-0.000</td><td>0.000</td><td>--</td><td>ts</td></tr></tbody></table><p></p><span style="color:red;">undefined</span></div></div>
<div class="ELEMENT CODE SHOW" func="$('#code0010 .OUTPUT')[0].scrollIntoView()" contenteditable="false" id="code0012" itemscope="" itemtype="https://tablord.com/templates/code"><pre class="SOURCE"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#code0010 .OUTPUT'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre><div class="OUTPUT SUCCESS"><span style="color:red;">undefined</span></div></div>
</div></div>